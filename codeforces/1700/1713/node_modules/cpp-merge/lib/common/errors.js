"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatErrorStack = exports.TraceError = void 0;
const os_1 = require("os");
class TraceError extends Error {
    constructor(message, cause) {
        super(message);
        if (cause) {
            this.cause = cause instanceof Error ? cause : new Error(cause);
        }
    }
}
exports.TraceError = TraceError;
function formatErrorStack(error) {
    if (error instanceof TraceError && error.cause) {
        return [
            error.stack || error.message,
            "caused by",
            formatErrorStack(error.cause)
        ].join(os_1.EOL);
    }
    if (error instanceof Error) {
        return error.stack || error.message;
    }
    return `${error}`;
}
exports.formatErrorStack = formatErrorStack;
//# sourceMappingURL=errors.js.map